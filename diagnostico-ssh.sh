#!/bin/bash

echo "üîç Diagn√≥stico SSH - OM√∫sicoCat√≥lico"
echo "==================================="

SERVER="142.93.55.152"

echo ""
echo "1. Testando conectividade b√°sica..."
ping -c 2 $SERVER

echo ""
echo "2. Testando porta SSH..."
nc -zv $SERVER 22

echo ""
echo "3. Tentativas de conex√£o SSH:"
echo ""

echo "üìù M√âTODOS PARA TENTAR:"
echo ""
echo "M√©todo 1 - SSH padr√£o:"
echo "ssh root@$SERVER"
echo ""
echo "M√©todo 2 - SSH com for√ßa de senha:"
echo "ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no root@$SERVER"
echo ""
echo "M√©todo 3 - SSH com timeout maior:"
echo "ssh -o ConnectTimeout=30 root@$SERVER"
echo ""
echo "M√©todo 4 - Tentar com usu√°rio diferente:"
echo "ssh ubuntu@$SERVER"
echo "ssh admin@$SERVER"
echo ""
echo "üîß ALTERNATIVAS SE SSH N√ÉO FUNCIONAR:"
echo ""
echo "1. üåê Console Web do Digital Ocean:"
echo "   - Acesse o painel do Digital Ocean"
echo "   - Clique no seu Droplet"
echo "   - Use o bot√£o 'Console' para acesso direto"
echo ""
echo "2. üì± App m√≥vel Digital Ocean:"
echo "   - Use o app para acessar o console"
echo ""
echo "3. üîë Configurar chave SSH:"
echo "   - ssh-keygen -t rsa"
echo "   - Adicionar chave ao Digital Ocean"
echo ""
echo "üìã COMANDOS PARA EXECUTAR NO SERVIDOR:"
echo "(Execute estes comandos quando conseguir acesso)"
echo ""
echo "cd /var/www/omusicacatolico"
echo "git pull origin main"
echo "npm install --production"
echo "pm2 restart omusicacatolico"
echo "pm2 status"
echo ""
echo "‚úÖ Teste final: https://omusicocatolico.com.br" 